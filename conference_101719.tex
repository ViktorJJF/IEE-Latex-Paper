\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
% \usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\graphicspath{ {./images/} }
\usepackage{textcomp}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{xcolor}

% biblatex
% \usepackage{biblatex}
% \addbibresource{bibtex/PaperDubai.bib}
% \addbibresource{zotero.bib}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\begin{document}

\makeatletter
\newcommand{\linebreakand}{%
    \end{@IEEEauthorhalign}
    \hfill\mbox{}\par
    \mbox{}\hfill\begin{@IEEEauthorhalign}
}
\makeatother

\title{Comparison of NLU services performance applied to frequently asked questions on a university}

\author{\IEEEauthorblockN{1\textsuperscript{st} Víctor Juan Jimenez Flores}
    \IEEEauthorblockA{\
        % textit{dept. name of organization (of Aff.)} \\
        \textit{name of organization (of Aff.)}\\
        Tacna, Perú \\
        victorjuanjf@apicyt.com}
    % asociación peruana de investigación, ciencia y tecnología comprar dominio antes de enviar paper
    \and
    \IEEEauthorblockN{2\textsuperscript{nd} Oscar Juan Jimenez Flores}
    \IEEEauthorblockA{
        % \textit{dept. name of organization (of Aff.)} \\
        \textit{Universidad Privada de Tacna}\\
        Tacna, Perú \\
        oscarjimenezflores@upt.pe}
    \and
    \IEEEauthorblockN{3\textsuperscript{rd} Juan Carlos Jimenez Flores}
    \IEEEauthorblockA{
        % \textit{dept. name of organization (of Aff.)} \\
        \textit{Southern Perú Copper Corporation}\\
        Tacna, Perú \\
        juancarlosjf@apicyt.com}
    \linebreakand % <------------- \and with a line-break
    \IEEEauthorblockN{4\textsuperscript{th} Juan Ubaldo Jimenez Castilla}
    \IEEEauthorblockA{
        % \textit{dept. name of organization (of Aff.)} \\
        \textit{Universidad José Carlos Mariátegui }\\
        Moquegua, Perú \\
        jjimenezc@ujcm.edu.pe}
}

\maketitle

\begin{abstract}
    The present paper aims to compare the main natural language understanding services in terms of performance. through F1 score and confusion matrix. To assess the performance, precision, recall and F1 score was used.
    This document is a model and instructions for \LaTeX.
    But ais
\end{abstract}

\begin{IEEEkeywords}
    chatbot, Natural Language Understanding
\end{IEEEkeywords}

\section{Introduction}
Nowadays, the industry and researchers are increasingly recognize the importance of chatbot systems, because they are integrated into everyday life, playing roles as assistants to end users \cite{Bird2018}. A chatbot is a computer program which uses machine learning technique voice recognition, and natural language processing (NLP) to conduct a intelligent conversation with a person (e.g. Amazon's Alexa and Google's Assistant) \cite{mittal2019getting}. Moreover, a chatbot works thanks to the natural language understanding (NLU), which is the ability of a machine to understand human languages, said otherwise, it is the process of converting natural language text into a form that computers can understand \cite{pathak2017artificial}.



Throughout this paper, the term NLU

Previous work has only focused on

In this research, the performance of six NLU services was evaluated

This paper is divided into five sections. Section II gives a brief overview of related works. The third section defines the NLU services evaluated during the research.

\section{Background}
Training data and input messages were extracted from Mariateguino Bot,which was the chatbot of the José Carlos Mariátegui University during 2018, its main function was to attend to the doubts of the students regarding the necessary requirements to carry out administrative procedures. Moreover, the chatbot was able to answer frequently asked questions, support students regarding the admissions process, and provide class schedules.

Mariateguino Bot was made with Dialogflow \cite{dialogflow2020}, a Google service that runs on Google Cloud Platform. Therefore, other platforms, described in section \ref{sec:nluServices}, were evaluated.

\section{Related works}
In recent years, multiple investigations have been carried out regarding chatbots and the impact they have on traditional processes, generally in customer service. Some of these researches are listed below.

Canonico and De Russis wrote a paper titled "A comparison and Critique of Natural Language Understanding Tools" \cite{Canonico2018}, which compares the main cloud-based platforms, from a descriptive and performance based point of view. Their results showed that Watsson Assistant is the platform who performs best.

In the other hand, Braun, Hernandez, Matthes and Langen wrote a paper titles "Evaluating Natural Language Understanding Services for Conversational Question Answering Systems", which presents a method to evaluate the classification performance of NLU services. Their results indicated that LUIS showed the best scores and RASA could achieve similar results.

\section{Natural language understanding services} \label{sec:nluServices}
There are many natural language understanding modules that are available as cloud services and major IT players like Google, Microsoft, IBM, Facebook and Amazon have created tools to develop chatbots \cite{hall2017hands}. Additionally, Rasa was included because Dialogflow training data can be converted to its format and is an open source alternative compared to  the other platforms.
\subsection{Dialogflow}
Dialogflow is a Google service that runs on Google Cloud Platform. Dialogflow is a natural language understanding platform that makes it easy to design and integrate a conversational user interface into any system \cite{dialogflow2020}.
\subsection{LUIS}
The Language Understanding Intelligent Service (LUIS) is a Microsoft's NLU cloud service and is part of the cognitive suite \cite{pathak2018iot}.
\subsection{Watsson Assistant}
Watsson Assistant is a cognitive cloud service offering by IBM that makes it easier for developers to build conversational interfaces and embed them into any application \cite{sabharwal2019developing}.
\subsection{Wit.ai}
Facebook has established the Wit.ai bot engine which allows training bots with sample conversations and have your bots repeatedly learn from interrelating with customers \cite{seligman2018artificial}.
\subsection{Amazon LEX}
Amazon Lex is a development platform,belonging to Amazon, for building intelligent assistants or chatbots, which provides many AI capabilities like Automatic Speech Recognition (ASR) and Natural language Understanding (NLU) \cite{tripuraneni2019hands}.
\subsection{Rasa}
Rasa NLU is an open-source NLP library for intent classification and entity extraction in chatbots \cite{raj2018building}.

\section{Materials and Methods}
\subsection{Materials}
The NLU services used during the research were Dialogflow, Wit.ai, LUIS, Amazon LEX and Rasa. Moreover, 100 messages from the Mariateguino Bot conversation history were selected as input data and they were grouped based on the expected intents, thus obtaining 30 intents. To calculate the performance of each platform, the F1 score metric was used, which includes precision and recall.

\begin{itemize}
    \item Precision
          \begin{equation}
              Precision=\frac{TP}{TP+FP}\label{eq}
          \end{equation}
    \item Recall
          \begin{equation}
              Precision=\frac{TP}{TP+FN}\label{eq}
          \end{equation}
\end{itemize}

\begin{equation}
    F_{1} =\frac{2 \times Precision\times Recall}{Precision+Recall}\label{eq}
\end{equation}

\subsection{Procedure}
In order to identify F1 score, it was necessary to calculate the precision and recall.

The F1 score was chosen beacuse it is one of the most practical ways to numerically calculate the performance of an NLU service

As a first step, a conversion of the Dialogflow training data to the rest of the research platforms was carried out, using the QBox.ai service \cite{qbox2020}. Then, one hundred messages were randomly selected from Mariateguino Bot conversation history and they were grouped based on the expected intents, thus obtaining 30 intents.

Afterwards, to start testing and obtain data, a Node.js application was created in order to combine the application programming interface (API) from each NLU service, in such a way that each input message was only entered once and the desired data was obtained in the format shown in Fig. \ref{fig:nludata}.

\begin{figure}[htbp]
    \centerline{\fbox{\includegraphics[scale=0.58]{nlu}}}
    \caption{Example of a figure caption.}
    \label{fig:nludata}
\end{figure}

In order to evaluate the results, the expected and predicted intentions were identified for each input message. Since 100 random messages from the conversation history were used, . In this way, true positives (TP), false positives (FP) and false negatives (FN) were calculated.


\section{Result}
hola que hace

\begin{figure}[htbp]
    \begin{center}
        \begin{tikzpicture}
            \begin{axis}
                [
                    ybar,
                    bar width=12pt,
                    ylabel=Precision,
                    xlabel=NLU services,
                    symbolic x coords={Dialogflow,LUIS,Watson,Wit.ai,LEX,Rasa},
                    enlarge x limits=0.075,
                    xtick=data,
                    xmajorgrids = false,
                    ymajorgrids = true,
                    ymin=0,
                    ymax=1,
                    % axis y line = left,
                    every outer y axis line/.append style = {-},
                    every outer x axis line/.append style = {-},
                    ylabel style = {font=\bfseries},
                    xlabel style = {font=\bfseries},
                    nodes near coords,
                    nodes near coords align={vertical},
                ]
                \addplot coordinates {(Dialogflow,0.828333333) (LUIS,0.461717171717172) (Watson,0.813918128654971) (Wit.ai,0.607663117663118) (LEX,0.551633986928105) (Rasa,0.618515325670498) };
            \end{axis}
        \end{tikzpicture}
    \end{center}
    \caption{Recall of NLU services}
    \label{fig}
\end{figure}

\begin{figure}[htbp]
    \begin{center}
        \begin{tikzpicture}
            \begin{axis}
                [
                    ybar,
                    bar width=12pt,
                    ylabel=Recall,
                    xlabel=NLU services,
                    symbolic x coords={Dialogflow,LUIS,Watson,Wit.ai,LEX,Rasa},
                    enlarge x limits=0.075,
                    xtick=data,
                    xmajorgrids = false,
                    ymajorgrids = true,
                    ymin=0,
                    ymax=1,
                    % axis y line = left,
                    every outer y axis line/.append style = {-},
                    every outer x axis line/.append style = {-},
                    ylabel style = {font=\bfseries},
                    xlabel style = {font=\bfseries},
                    nodes near coords,
                    nodes near coords align={vertical},
                ]
                \addplot coordinates {(Dialogflow,0.848744588744589) (LUIS,0.343726551226551) (Watson,0.89017316017316) (Wit.ai,0.602640692640693) (LEX,0.514170274170274) (Rasa,0.651991341991342) };
            \end{axis}
        \end{tikzpicture}
    \end{center}
    \caption{F1 score of NLU services}
    \label{fig}
\end{figure}

Abajo se explica el f1 score

\begin{figure}[htbp]
    \begin{center}
        \begin{tikzpicture}
            \begin{axis}
                [
                    ybar,
                    bar width=12pt,
                    ylabel=F1 score,
                    xlabel=NLU services,
                    symbolic x coords={Dialogflow,LUIS,Watson,Wit.ai,LEX,Rasa},
                    enlarge x limits=0.075,
                    xtick=data,
                    xmajorgrids = false,
                    ymajorgrids = true,
                    ymin=0,
                    ymax=1,
                    % axis y line = left,
                    every outer y axis line/.append style = {-},
                    every outer x axis line/.append style = {-},
                    ylabel style = {font=\bfseries},
                    xlabel style = {font=\bfseries},
                    nodes near coords,
                    nodes near coords align={vertical},
                ]
                \addplot coordinates {(Dialogflow,0.820630111) (LUIS,0.357854738
                        ) (Watson,0.820979481) (Wit.ai,0.576004394) (LEX,0.503356458) (Rasa,0.615315904) };
            \end{axis}
        \end{tikzpicture}
    \end{center}
    \caption{Precision of NLU services}
    \label{fig}
\end{figure}

Esta es la ultima parte de la tabla

\begin{table}[htbp]
    \centering
    \caption{F1 scores overview}
    \begin{tabular}{|c|c|c|c|}
        \hline
        \textbf{NLU Service} & \textbf{Precision} & \textbf{Recall} & \textbf{F1 score} \\
        \hline
        Dialogflow           & 0.828333333        & 0.848744589     & 0.820630111       \\
        \hline
        LUIS                 & 0.461717172        & 0.343726551     & 0.357854738       \\
        \hline
        Watson               & 0.813918129        & 0.89017316      & 0.820979481       \\
        \hline
        Wit.ai               & 0.607663118        & 0.602640693     & 0.576004394       \\
        \hline
        LEX                  & 0.551633987        & 0.514170274     & 0.503356458       \\
        \hline
        RASA                 & 0.618515326        & 0.651991342     & 0.615315904       \\
        \hline
    \end{tabular}%
    \label{tab:addlabel}%
\end{table}%
\section{Discussion}
\section{Conclusion}
The limitations during the research were
\section{Future work}

\section*{Acknowledgment}

The preferred spelling of the word ``acknowledgment'' in America is without
an ``e'' after the ``g''. Avoid the stilted expression ``one of us (R. B.
G.) thanks $\ldots$''. Instead, try ``R. B. G. thanks$\ldots$''. Put sponsor
acknowledgments in the unnumbered footnote on the first page.

\bibliographystyle{IEEEtran}
% \printbibliography
\bibliography{C:/Users/JIMENEZ/Documents/bibtex/PaperIEEE.bib}

\end{document}